{"ast":null,"code":"import _slicedToArray from\"/Users/justinas/Documents/repos/microgogool/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext}from'react';import{useState}from'react';import UIDContext from'src/UIDContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),authErrorMsg=_useState2[0],setAuthErrorMsg=_useState2[1];var _useContext=useContext(UIDContext),UID=_useContext.UID,setUID=_useContext.setUID;function submitForm(e){e.preventDefault();var xhr=new XMLHttpRequest();xhr.open(\"POST\",'https://microgoogol.herokuapp.com/login',true);xhr.setRequestHeader('Content-Type','application/json');xhr.send(JSON.stringify({email:e.currentTarget.email.value,password:e.currentTarget.password.value}));xhr.onload=function(){var parsedResponse=JSON.parse(xhr.responseText);if(parsedResponse.UID){setUID(parsedResponse.UID);}else{setAuthErrorMsg(xhr.responseText);}};}return/*#__PURE__*/_jsx(\"div\",{className:\"login-component\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){submitForm(e);},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Log in with your credentials\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-comoponent-inputHolder\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"auth-component-errorMsg\",children:authErrorMsg.slice(1,authErrorMsg.length-1)}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",children:\"Log in\"}),/*#__PURE__*/_jsx(\"button\",{className:\"auth-goBack-btn\",type:\"button\",onClick:function onClick(){props.authState.setAuthButton('default');},children:\"Go back\"})]})});}export default Login;","map":{"version":3,"names":["React","useContext","useState","UIDContext","Login","props","authErrorMsg","setAuthErrorMsg","UID","setUID","submitForm","e","preventDefault","xhr","XMLHttpRequest","open","setRequestHeader","send","JSON","stringify","email","currentTarget","value","password","onload","parsedResponse","parse","responseText","slice","length","authState","setAuthButton"],"sources":["/Users/justinas/Documents/repos/microgogool/client/src/Components/Authentication/Login.tsx"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport { useState } from 'react';\n\nimport UIDContext from 'src/UIDContext';\n\nfunction Login(props: any){\n    \n    const [authErrorMsg, setAuthErrorMsg] = useState('');\n\n    const { UID, setUID } = useContext(UIDContext);\n    function submitForm(e: React.FormEvent<HTMLFormElement>){\n        e.preventDefault();\n        let xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", 'https://microgoogol.herokuapp.com/login', true);\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        xhr.send(JSON.stringify({\n            email: e.currentTarget.email.value,\n            password: e.currentTarget.password.value\n        }));\n\n        xhr.onload = ()=>{\n            const parsedResponse = JSON.parse(xhr.responseText);\n            if(parsedResponse.UID){\n                setUID(parsedResponse.UID);\n            } else {\n                setAuthErrorMsg(xhr.responseText);\n            }\n        }\n    }\n\n    return (\n        <div className='login-component'>\n        <form onSubmit={(e)=>{submitForm(e)}}>\n            <p>Log in with your credentials</p>\n            <div className='login-comoponent-inputHolder'>\n                <label htmlFor='email'>Email:</label>\n                <input id='email' name='email'></input>\n                <label htmlFor='password'>Password:</label>\n                <input id='password' name='password' type='password'></input>\n            </div>\n            <p className='auth-component-errorMsg'>{authErrorMsg.slice(1,authErrorMsg.length-1)}</p>\n            <button className='button'>Log in</button>\n            <button className='auth-goBack-btn' type='button' onClick={()=>{props.authState.setAuthButton('default')}}>Go back</button>\n        </form>\n    </div>\n    );\n}\n\nexport default Login;"],"mappings":"wIAAA,MAAOA,MAAK,EAAIC,UAAU,KAAmB,OAAO,CACpD,OAASC,QAAQ,KAAQ,OAAO,CAEhC,MAAOC,WAAU,KAAM,gBAAgB,CAAC,wFAExC,QAASC,MAAK,CAACC,KAAU,CAAC,CAEtB,cAAwCH,QAAQ,CAAC,EAAE,CAAC,wCAA7CI,YAAY,eAAEC,eAAe,eAEpC,gBAAwBN,UAAU,CAACE,UAAU,CAAC,CAAtCK,GAAG,aAAHA,GAAG,CAAEC,MAAM,aAANA,MAAM,CACnB,QAASC,WAAU,CAACC,CAAmC,CAAC,CACpDA,CAAC,CAACC,cAAc,EAAE,CAClB,GAAIC,IAAG,CAAG,GAAIC,eAAc,EAAE,CAC9BD,GAAG,CAACE,IAAI,CAAC,MAAM,CAAE,yCAAyC,CAAE,IAAI,CAAC,CACjEF,GAAG,CAACG,gBAAgB,CAAC,cAAc,CAAE,kBAAkB,CAAC,CACxDH,GAAG,CAACI,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC,CACpBC,KAAK,CAAET,CAAC,CAACU,aAAa,CAACD,KAAK,CAACE,KAAK,CAClCC,QAAQ,CAAEZ,CAAC,CAACU,aAAa,CAACE,QAAQ,CAACD,KACvC,CAAC,CAAC,CAAC,CAEHT,GAAG,CAACW,MAAM,CAAG,UAAI,CACb,GAAMC,eAAc,CAAGP,IAAI,CAACQ,KAAK,CAACb,GAAG,CAACc,YAAY,CAAC,CACnD,GAAGF,cAAc,CAACjB,GAAG,CAAC,CAClBC,MAAM,CAACgB,cAAc,CAACjB,GAAG,CAAC,CAC9B,CAAC,IAAM,CACHD,eAAe,CAACM,GAAG,CAACc,YAAY,CAAC,CACrC,CACJ,CAAC,CACL,CAEA,mBACI,YAAK,SAAS,CAAC,iBAAiB,uBAChC,cAAM,QAAQ,CAAE,kBAAChB,CAAC,CAAG,CAACD,UAAU,CAACC,CAAC,CAAC,EAAE,wBACjC,mDAAmC,cACnC,aAAK,SAAS,CAAC,8BAA8B,wBACzC,cAAO,OAAO,CAAC,OAAO,oBAAe,cACrC,cAAO,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAS,cACvC,cAAO,OAAO,CAAC,UAAU,uBAAkB,cAC3C,cAAO,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAS,GAC3D,cACN,UAAG,SAAS,CAAC,yBAAyB,UAAEL,YAAY,CAACsB,KAAK,CAAC,CAAC,CAACtB,YAAY,CAACuB,MAAM,CAAC,CAAC,CAAC,EAAK,cACxF,eAAQ,SAAS,CAAC,QAAQ,oBAAgB,cAC1C,eAAQ,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAE,kBAAI,CAACxB,KAAK,CAACyB,SAAS,CAACC,aAAa,CAAC,SAAS,CAAC,EAAE,qBAAiB,GACxH,EACL,CAEV,CAEA,cAAe3B,MAAK"},"metadata":{},"sourceType":"module"}